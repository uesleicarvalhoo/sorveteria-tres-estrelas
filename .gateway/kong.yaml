_format_version: "3.0"

plugins:
  - name: kong-jwt2header
    enabled: false
    config:
      strip_claims: "false"
      token_required: "true"

consumers:
  - username: auth-consumer

jwt_secrets:
  - consumer: auth-consumer
    key: auth-jwt

services:
  - name: backend
    url: http://backend/

  - name: auth
    url: http://backend/auth

  - name: frontend
    url: http://frontend/

routes:
  - name: auth-api
    service: auth
    paths:
      - /api/auth

  - name: backend-api
    service: backend
    paths:
      - /api
    plugins:
      - name: kong-jwt2header
        enabled: true

  - name: frontend-web
    service: frontend
    paths:
      - /
